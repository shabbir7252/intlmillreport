
@using Cash_Register.ViewModels;

@{
    ViewBag.Title = "CashRegister";

    var salesmans = (IEnumerable<CRSalesman>)ViewBag.Salesmans;
    var reserve = ViewBag.reserveAmount;
}

<!--
    To disable input from keyboard use this
onkeydown="return false"
-->

<style>

    .calculator {
        font-size: 28px;
        margin: 0 auto;
        width: 10em;
    }

        .calculator::before, .calculator::after {
            content: " ";
            display: table;
        }

        .calculator::after {
            clear: both;
        }

    /* Calculator after dividing by zero */
    .broken {
        -webkit-animation: broken 2s;
        animation: broken 2s;
        -webkit-transform: translate3d(0, -2000px, 0);
        transform: translate3d(0, -2000px, 0);
        opacity: 0;
    }

    .viewer {
        color: #c97874;
        float: left;
        line-height: 3em;
        text-align: right;
        text-overflow: ellipsis;
        overflow: hidden;
        width: 7.5em;
        height: 3em;
    }

    .calculator span {
        background: #F2F2F2;
        color: #313135;
        color: #000;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 1px solid lightgrey;
        margin: 10px;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        font-size: 1.8rem;
        padding: 1rem;
        text-align: center;
    }

        .calculator span:hover {
            background: #201e40;
        }

        .calculator span:focus {
            outline: 0;
            /* The value fade-ins that appear */
        }

            .calculator span:focus::after {
                -webkit-animation: zoom 1s;
                animation: zoom 1s;
                -webkit-animation-iteration-count: 1;
                animation-iteration-count: 1;
                -webkit-animation-fill-mode: both;
                animation-fill-mode: both;
                content: attr(data-num);
                cursor: default;
                font-size: 100px;
                position: absolute;
                top: 1.5em;
                left: 50%;
                text-align: center;
                margin-left: -24px;
                opacity: 0;
                width: 48px;
            }

    /* Same as above, modified for operators */
    .ops:focus::after {
        content: attr(data-ops);
        margin-left: -210px;
        width: 420px;
    }

    /* Same as above, modified for result */
    .equals:focus::after {
        content: attr(data-result);
        margin-left: -300px;
        width: 600px;
    }


    label {
        padding-top: 8px;
    }

    .numeric-pad {
        /*width: 100%;*/
        max-width: 300px;
        margin: 0 auto;
    }

        .numeric-pad .num-display {
            font-size: 1.5rem;
            /*padding: 0.3rem;*/
            /*text-align: left;*/
            /*font-weight: bold;*/
            /*width: 100%;*/
            /*            background: #E6E6E6;*/
            /*border: 0;*/
        }

        .numeric-pad .numbers {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            /*            max-width: 300px;*/
        }

            .numeric-pad .numbers span, .numeric-pad input[type="reset"], .numeric-pad .btn-submit-input {
                background: #F2F2F2;
                color: #313135;
                color: #000;
                width: 70px;
                height: 70px;
                border-radius: 50%;
                border: 1px solid lightgrey;
                margin: 10px;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                font-size: 1.8rem;
                padding: 1rem;
                text-align: center;
            }

            .numeric-pad .numbers button {
                width: 70px;
                height: 70px;
                border-radius: 50%;
                border: 1px solid lightgrey;
                margin: 15px;
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                padding: 0.1rem;
            }

    /* Chrome, Safari, Edge, Opera */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
</style>

<div class="row">
    <div class="col-11 mx-auto">
        <div class="row">
            <div class="col-6">
                <h4 class="mb-0 pt-1">Cash Register System | نظام كشف الصندوق</h4>
            </div>
            <div class="col-6 text-right">
                <div class="row">

                    <div class="col-2 offset-8 text-right">
                        <button onclick="GetRecords()" class="btn btn-info">
                            <svg width="25px" height="25px" viewBox="0 0 16 16" class="bi bi-table" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z" />
                            </svg>
                        </button>
                    </div>

                    <div class="col-2 text-right">
                        @using (Html.BeginForm("logoff", "Home", FormMethod.Post))
                        {
                            <button type="submit" class="btn btn-secondary">
                                @*<svg width="25px" height="25px" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M5.854 4.646a.5.5 0 0 1 0 .708L3.207 8l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z" />
                                        <path fill-rule="evenodd" d="M2.5 8a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                                    </svg>*@
                                <svg width="25px" height="25px" viewBox="0 0 16 16" class="bi bi-power" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M5.578 4.437a5 5 0 1 0 4.922.044l.5-.866a6 6 0 1 1-5.908-.053l.486.875z" />
                                    <path fill-rule="evenodd" d="M7.5 8V1h1v7h-1z" />
                                </svg>
                            </button>
                        }
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<hr />

<div class="row">
    <div class="col-12 pr-0">
        <div class="row">
            <div class="col-lg-8 col-xl-7 px-5">

                <div class="row">

                    <div class="col-6">
                        <div class="row">
                            <div class="col-3">
                                <label for="ddlSalesmanEn">Salesman</label>
                            </div>
                            <div class="col-9">
                                <div class="form-group">
                                    <select class="form-control" id="ddlSalesmanEn" style="max-width: 100%;" tabindex="1" onchange="ChangeSelectValue('Ar')">
                                        <option value="-1">Select Salesman</option>
                                        @foreach (var saleman in salesmans)
                                        {
                                            <option value=@saleman.Sman_Cd>@saleman.NameEn</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-6 divSalesmanAr">
                        <div class="row">
                            <div class="col-3">
                                <label for="ddlSalesmanAr" class="">الموظف</label>
                            </div>
                            <div class="col-9">
                                <div class="form-group text-right">
                                    <select id="ddlSalesmanAr" class="form-control" dir="rtl" style="max-width: 100%;" tabindex="2" onchange="ChangeSelectValue('En')">
                                        <option value="-1">اختار</option>
                                        @foreach (var saleman in salesmans)
                                        {
                                            <option value=@saleman.Sman_Cd>@saleman.NameAr</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">

                    <div class="col-6">
                        <div class="row">
                            <div class="col-4">
                                <label for="datepicker">Date/تاريخ</label>
                            </div>
                            <div class="col-8">
                                <input id="datepicker" class="form-control" tabindex="3" />
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="row">

                            <div class="col-4">
                                <label for="ddlPeriod">Period/فترة</label>
                            </div>

                            <div class="col-8">
                                <div class="form-group">
                                    <select id="ddlPeriod" class="custom-select custom-select-lg" dir="rtl" style="max-width: 100%;" tabindex="4" onchange="ChangePeriod()">
                                        <option value="">Select Period</option>
                                        <option value="morning">صباحاً(Morning)</option>
                                        <option value="evening">مساءاً(Evening)</option>
                                    </select>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="cheques">Cheques/شيكات</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control cheques" id="cheques" value="0.000" tabindex="5"
                                           onfocus="MakeAsDefaultInput('cheques')">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-5 offset-1">
                        <div class="row">
                            <div class="col-6">
                                <label for="20kd">20 Kd</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="20kd" value="0" tabindex="11" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('20kd'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="talabat">Talabat/طلبات</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="talabat" value="0.000" tabindex="6" onfocus="MakeAsDefaultInput('talabat')">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-5 offset-1">
                        <div class="row">
                            <div class="col-6">
                                <label for="10kd">10 Kd</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="10kd" value="0" tabindex="12" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('10kd'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="online">Online/الموقع</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="online" value="0.000" tabindex="7" onfocus="MakeAsDefaultInput('online');">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-5 offset-1">
                        <div class="row">
                            <div class="col-6">
                                <label for="5kd">5 Kd</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="5kd" value="0" tabindex="13" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('5kd'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="online">KNET/كي نت</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="knet" value="0.000" tabindex="8" onfocus="MakeAsDefaultInput('knet');">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-5 offset-1">
                        <div class="row">
                            <div class="col-6">
                                <label for="1kd">1 Kd</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="1kd" value="0" tabindex="14" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('1kd'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="online">Visa/فيزا</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="visa" value="0.000" tabindex="9" onfocus="MakeAsDefaultInput('visa')">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="row">
                            <div class="col-lg-2 p-0 text-right">
                                <label for="halfkd">1/2 Kd</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="halfkd" value="0" tabindex="15" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('halfkd'); DisableDot()">
                                </div>
                            </div>
                            <div class="col-lg-2 p-0 text-right">
                                <label for="quarterkd">1/4 Kd</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="quarterkd" value="0" tabindex="16" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('quarterkd'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="reserve">Reserve/العهدة</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="reserve" value="@reserve" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="row">
                            <div class="col-lg-2 p-0 text-right">
                                <label for="100fils">100 Fils</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="100fils" value="0" tabindex="17" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('100fils'); DisableDot()">
                                </div>
                            </div>

                            <div class="col-lg-2 p-0 text-right">
                                <label for="50fils">50 Fils</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="50fils" value="0" tabindex="18" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('50fils'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="expense">Expense/مصاريف</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="expense" value="0.000" tabindex="10" onfocus="MakeAsDefaultInput('expense')">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="row">
                            <div class="col-lg-2 p-0 text-right">
                                <label for="10fils">10 Fils</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="10fils" value="0" tabindex="19" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('10fils'); DisableDot()">
                                </div>
                            </div>

                            <div class="col-lg-2 p-0 text-right">
                                <label for="20fils">20 Fils</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="20fils" value="0" tabindex="20" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('20fils'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <div class="col-6">
                                <label for="netcash" style="font-size: 12px;">Net Cash/اجمالي النقدي</label>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="netcash" value="0.000" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="row">
                            <div class="col-lg-2 pr-0 text-right">
                                <label for="5fils">5 Fils</label>
                            </div>
                            <div class="col-lg-4">
                                <div class="form-group">
                                    <input type="number" class="form-control" id="5fils" value="0" tabindex="21" onkeyup="CalculateNetCash()" onfocus="MakeAsDefaultInput('5fils'); DisableDot()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-lg-4 col-xl-5">
                <div class="row">
                    <div class="col-12">
                        <h5 class="text-right mt-2 text-center"><span>الفرع : </span>@ViewBag.CRLocationAr</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">

                        <div class="numeric-pad-form pb-2">
                            <div class="numeric-pad">
                                <label class="numbers">

                                    <span id="viewer" class="viewer d-none">0</span>
                                    <span class="num" data-num="1">1</span>
                                    <span class="num" data-num="2">2</span>
                                    <span class="num" data-num="3">3</span>
                                    <span class="num" data-num="4">4</span>
                                    <span class="num" data-num="5">5</span>
                                    <span class="num" data-num="6">6</span>
                                    <span class="num" data-num="7">7</span>
                                    <span class="num" data-num="8">8</span>
                                    <span class="num" data-num="9">9</span>
                                    <span class="num dot" data-num="." value=".">.</span>
                                    <span class="num" data-num="0">0</span>
                                    <span id="enter" class="enter">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-return-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M5.854 5.646a.5.5 0 0 1 0 .708L3.207 9l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z" />
                                            <path fill-rule="evenodd" d="M13.5 2.5a.5.5 0 0 1 .5.5v4a2.5 2.5 0 0 1-2.5 2.5H3a.5.5 0 0 1 0-1h8.5A1.5 1.5 0 0 0 13 7V3a.5.5 0 0 1 .5-.5z" />
                                        </svg>
                                    </span>
                                    @*<span id="clear" class="clear">C</span>*@

                                    <span id="reset" class="reset">
                                        <svg style="vertical-align: inherit;color: red" width="100%" height="100%" viewBox="0 0 16 16" class="bi bi-trash" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                                        </svg>
                                    </span>

                                    <span id="clean" class="clean">
                                        <svg style="vertical-align: inherit" width="100%" height="100%" viewBox="0 0 16 16" class="bi bi-x-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.146-3.146a.5.5 0 0 0-.708-.708L8 7.293 4.854 4.146a.5.5 0 1 0-.708.708L7.293 8l-3.147 3.146a.5.5 0 0 0 .708.708L8 8.707l3.146 3.147a.5.5 0 0 0 .708-.708L8.707 8l3.147-3.146z" />
                                        </svg>
                                    </span>

                                    <span id="clear" class="clear d-none">
                                        <svg style="vertical-align: inherit" width="100%" height="100%" viewBox="0 0 16 16" class="bi bi-x-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.146-3.146a.5.5 0 0 0-.708-.708L8 7.293 4.854 4.146a.5.5 0 1 0-.708.708L7.293 8l-3.147 3.146a.5.5 0 0 0 .708.708L8 8.707l3.146 3.147a.5.5 0 0 0 .708-.708L8.707 8l3.147-3.146z" />
                                        </svg>
                                    </span>

                                    <span id="backspace" class="backspace">
                                        <svg style="vertical-align: inherit" width="80%" height="80%" viewBox="0 0 16 16" class="bi bi-backspace" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z" />
                                            <path fill-rule="evenodd" d="M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z" />
                                            <path fill-rule="evenodd" d="M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z" />
                                        </svg>
                                    </span>
                                </label>
                            </div>

                        </div>
                    </div>

                    @*<div class="numeric-pad-form pt-3 pb-2">
                            <div class="numeric-pad">
                                <label class="numbers">

                                    <span value="1">1</span>
                                    <span value="2">2</span>
                                    <span value="3">3</span>

                                    <span value="4">4</span>
                                    <span value="5">5</span>
                                    <span value="6">6</span>

                                    <span value="7">7</span>
                                    <span value="8">8</span>
                                    <span value="9">9</span>
                                    <span value=".">.</span>
                                    <span value="0">0</span>

                                    <span value="enter">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-return-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M5.854 5.646a.5.5 0 0 1 0 .708L3.207 9l2.647 2.646a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z" />
                                            <path fill-rule="evenodd" d="M13.5 2.5a.5.5 0 0 1 .5.5v4a2.5 2.5 0 0 1-2.5 2.5H3a.5.5 0 0 1 0-1h8.5A1.5 1.5 0 0 0 13 7V3a.5.5 0 0 1 .5-.5z" />
                                        </svg>
                                    </span>

                                    <span value="reset">
                                        <svg style="vertical-align: inherit;color: red" width="100%" height="100%" viewBox="0 0 16 16" class="bi bi-trash" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                                        </svg>
                                    </span>

                                    <span value="cancel">
                                        <svg style="vertical-align: inherit" width="100%" height="100%" viewBox="0 0 16 16" class="bi bi-x-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.146-3.146a.5.5 0 0 0-.708-.708L8 7.293 4.854 4.146a.5.5 0 1 0-.708.708L7.293 8l-3.147 3.146a.5.5 0 0 0 .708.708L8 8.707l3.146 3.147a.5.5 0 0 0 .708-.708L8.707 8l3.147-3.146z" />
                                        </svg>
                                    </span>

                                    <span value="bs">
                                        <svg style="vertical-align: inherit" width="80%" height="80%" viewBox="0 0 16 16" class="bi bi-backspace" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z" />
                                            <path fill-rule="evenodd" d="M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z" />
                                            <path fill-rule="evenodd" d="M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z" />
                                        </svg>
                                    </span>


                                </label>

                            </div>
                        </div>*@
                </div>

                <div class="row">
                    <div class="col-6 mx-auto">
                        <button class="btn btn-primary btn-block btn-lg" onclick="Save()">Save/حفظ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>

        //const numWrap = $('.numeric-pad');
        //var count = 0;
        //var isDec = false;

        //function searchNumber() {
        //    const btn = numWrap.find('.numbers').find('span');
        //    //reset = numWrap.find('.num-reset');

        //    btn.on('click', function (e) {
        //        e.preventDefault();
        //        var input = $('#' + defaultInputId);

        //        var value = this.innerHTML;

        //        if (value === '.') {
        //            isDec = true;
        //        }

        //        if (isDec && count > 0) {
        //            console.log('ent');
        //            var divisionVal = 10 * count;
        //            var innervalue = +(input.val() + `${this.innerHTML}`);
        //            var actualVal = innervalue / divisionVal;
        //            input.val(actualVal);
        //        }

        //        if (value !== '.') {
        //            input.val(input.val() + value);
        //        }

        //        if (isDec) {
        //            count += 1;
        //        }

        //    });

        //    //reset.on('click', function (e) {
        //    //    e.preventDefault();
        //    //    input.val("");
        //    //});
        //}

        //// searchNumber();

        var defaultInputId = '';
        var tabindex = 1;
        var storeval = '';
        var backSpace = jQuery.Event("click", { keyCode: 20 });
        var salesman = -1;
        var period = '';
        var skip = true;

        function MakeAsDefaultInput(value) {
            skip = true;
            defaultInputId = value;
            var elem = $('#' + defaultInputId);
            if (+elem.val() === 0.000) {
                elem.val('');
                $("#clear").click();
                EnableDot();
                storeval = '';
            } else {
                storeval = elem.val();
                $("#clear").click();
                if (storeval.includes('.')) {
                    DisableDot();
                }
                elem.val(storeval);
            }

            CalculateNetCash();
        }

        $('.dot').click(function () {
            DisableDot();
        });

        function DisableDot() {
            // console.log('disabled dot!');
            $('.dot').css("pointer-events", "none")
        }

        function EnableDot() {
            $('.dot').css("pointer-events", "auto")
        }

        $('.clean').on('click', function () {
            $("#clear").click();
            storeval = '';
        });

        $('.reset').on('click', function () {
            DeleteAll();
        });



        //$('.backspace').on('click', function () {
        //    var elem = $('#' + defaultInputId);
        //    var value = elem.val().slice(0, -1);
        //    console.log(value);
        //    elem.val(value);
        //    storeval = value;
        //});


        var today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
        $('#datepicker').datepicker({
            uiLibrary: 'bootstrap4',
            maxDate: today
        });

        (function () {
            "use strict";

            // Shortcut to get elements
            var el = function (element) {
                if (element.charAt(0) === "#") { // If passed an ID...
                    return document.querySelector(element); // ... returns single element
                }

                return document.querySelectorAll(element); // Otherwise, returns a nodelist
            };

            // Variables
            var viewer = el("#viewer"), // Calculator screen where result is displayed
                equals = el("#equals"), // Equal button
                nums = el(".num"), // List of numbers
                ops = el(".ops"), // List of operators
                theNum = "", // Current number
                oldNum = "", // First number
                resultNum, // Result
                operator;

            // When: Number is clicked. Get the current number selected
            var setNum = function () {
                
                if (resultNum) { // If a result was displayed, reset number
                    theNum = this.getAttribute("data-num");
                    resultNum = "";
                } else { // Otherwise, add digit to previous number (this is a string!)
                    var recievedVal = this.getAttribute("data-num");
                    //if (recievedVal === '.') {
                    //    recievedVal += 0;
                    //    operator = true;
                    //}
                    debugger;

                    if (!skip) {
                        if (storeval.slice(0, -1) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -1) === storeval) {
                            storeval = '';
                        }


                        if (storeval.slice(0, -2) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -2) === storeval) {
                            storeval = '';
                        }

                        if (storeval.slice(0, -3) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -3) === storeval) {
                            storeval = '';
                        }

                        if (storeval.slice(0, -4) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -4) === storeval) {
                            storeval = '';
                        }

                        if (storeval.slice(0, -5) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -5) === storeval) {
                            storeval = '';
                        }

                        if (storeval.slice(0, -6) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -6) === storeval) {
                            storeval = '';
                        }

                        if (storeval.slice(0, -7) === theNum) {
                            storeval = '';
                        }

                        if (theNum.slice(0, -7) === storeval) {
                            storeval = '';
                        }
                    }

                    if (theNum == storeval) {
                        storeval = '';
                    }

                    theNum += recievedVal;
                }

                viewer.innerHTML = theNum; // Display current number
                if (typeof defaultInputId !== 'undefined') {
                        $('#' + defaultInputId).val(storeval + theNum);
                }

                skip = true;
            };

            // When: Operator is clicked. Pass number to oldNum and save operator
            //var moveNum = function () {
            //    oldNum = theNum;
            //    theNum = "";
            //    operator = this.getAttribute("data-ops");

            //    equals.setAttribute("data-result", ""); // Reset result in attr
            //};

            // When: Equals is clicked. Calculate result
            //var displayNum = function () {

            //    // Convert string input to numbers
            //    oldNum = parseFloat(oldNum);
            //    theNum = parseFloat(theNum);

            //    // Perform operation
            //    switch (operator) {
            //        case "plus":
            //            resultNum = oldNum + theNum;
            //            break;

            //        case "minus":
            //            resultNum = oldNum - theNum;
            //            break;

            //        case "times":
            //            resultNum = oldNum * theNum;
            //            break;

            //        case "divided by":
            //            resultNum = oldNum / theNum;
            //            break;

            //        // If equal is pressed without an operator, keep number and continue
            //        default:
            //            resultNum = theNum;
            //    }

            //    // If NaN or Infinity returned
            //    if (!isFinite(resultNum)) {
            //        if (isNaN(resultNum)) { // If result is not a number; set off by, eg, double-clicking operators
            //            resultNum = "You broke it!";
            //        } else { // If result is infinity, set off by dividing by zero
            //            resultNum = "Look at what you've done";
            //            el('#calculator').classList.add("broken"); // Break calculator
            //            el('#reset').classList.add("show"); // And show reset button
            //        }
            //    }

            //    // Display result, finally!
            //    viewer.innerHTML = resultNum;
            //    equals.setAttribute("data-result", resultNum);

            //    // Now reset oldNum & keep result
            //    oldNum = 0;
            //    theNum = resultNum;

            //};



            /* The click events */

            // Add click event to numbers
            for (var i = 0, l = nums.length; i < l; i++) {
                nums[i].onclick = setNum;
            }

            // Add click event to operators
            for (var i = 0, l = ops.length; i < l; i++) {
                ops[i].onclick = moveNum;
            }

            // When: Clear button is pressed. Clear everything
            var clearAll = function () {
                oldNum = "";
                theNum = "";
                viewer.innerHTML = "0";
                var elem = $('#' + defaultInputId);
                elem.val('');
                EnableDot();
            };


            // Add click event to clear button
            el("#clear").onclick = clearAll;

            el('#backspace').onclick = function () {
                var elem = $('#' + defaultInputId);
                debugger;
                var value = elem.val().slice(0, -1);
                console.log(value);
                if (value === '') {
                    EnableDot();
                }

                if (value.indexOf('.') > -1) {
                    DisableDot();
                } else {
                    EnableDot();
                }

                elem.val(value);
                clearAll;
                theNum = value;
                skip = false;
            }

            // Add click event to equal sign
            // equals.onclick = displayNum;

            //// Add click event to reset button
            //el("#reset").onclick = function () {
            //    window.location = window.location;
            //};



        }());


        //$("#enter").click(function (e) {
        //    alert($('#' + defaultInputId).attr('tabindex'));
        //});


        $("#enter").click(function (e) {
            var tabindexId = +($('#' + defaultInputId).attr('tabindex')) + 1;
            $('input[tabindex="' + tabindexId + '"]').focus();
        });

        function CalculateNetCash() {
            var cheques = $("#cheques").val();
            var talabat = $("#talabat").val();
            var online = $("#online").val();
            var knet = $("#knet").val();
            var visa = $("#visa").val();
            var expense = $("#expense").val();
            var twentykd = $("#20kd").val();
            var tenkd = $("#10kd").val();
            var fivekd = $("#5kd").val();
            var onekd = $("#1kd").val();
            var halfkd = $("#halfkd").val();
            var quarterkd = $("#quarterkd").val();
            var hundfils = $("#100fils").val();
            var fiftyfils = $("#50fils").val();
            var twentyfils = $("#20fils").val();
            var tenfils = $("#10fils").val();
            var fivefils = $("#5fils").val();


            var total = (20 * twentykd) + (10 * tenkd) + (5 * fivekd) + (1 * onekd) +
                (0.500 * halfkd) + (0.250 * quarterkd) + (0.100 * hundfils) +
                (0.050 * fiftyfils) + (0.020 * twentyfils) + (0.010 * tenfils) +
                (0.005 * fivefils);

            var netBalance = total - @reserve;

            $("#netcash").val(netBalance.toFixed(3));
        }

        function DeleteAll() {
            $("#cheques").val("0.000");
            $("#talabat").val("0.000");
            $("#online").val("0.000");
            $("#knet").val("0.000");
            $("#visa").val("0.000");
            $("#expense").val("0.000");
            $("#20kd").val("0.000");
            $("#10kd").val("0.000");
            $("#5kd").val("0.000");
            $("#1kd").val("0.000");
            $("#halfkd").val("0.000");
            $("#quarterkd").val("0.000");
            $("#100fils").val("0.000");
            $("#50fils").val("0.000");
            $("#20fils").val("0.000");
            $("#10fils").val("0.000");
            $("#5fils").val("0.000");
            $("#netcash").val(-@reserve);
        }

        function Save() {
            var date = $('#datepicker').val();
            if (+salesman === -1) {
                alert('Please select salesman!');
                $("#ddlSalesmanAr").focus();
            } else if (typeof date === 'undefined' || date === '' || date === null) {
                alert('Please enter the date!');
                $('#datepicker').focus();
            } else if (typeof period === 'undefined' || period === '' || period === null) {
                alert('Please select period of time!');
                $("#ddlPeriod").focus();
            } else {

                var cheques = $("#cheques").val();
                var talabat = $("#talabat").val();
                var online = $("#online").val();
                var knet = $("#knet").val();
                var visa = $("#visa").val();
                var expense = $("#expense").val();
                var twentykd = $("#20kd").val();
                var tenkd = $("#10kd").val();
                var fivekd = $("#5kd").val();
                var onekd = $("#1kd").val();
                var halfkd = $("#halfkd").val();
                var quarterkd = $("#quarterkd").val();
                var hundfils = $("#100fils").val();
                var fiftyfils = $("#50fils").val();
                var twentyfils = $("#20fils").val();
                var tenfils = $("#10fils").val();
                var fivefils = $("#5fils").val();

                var total = (20 * twentykd) + (10 * tenkd) + (5 * fivekd) + (1 * onekd) +
                (0.500 * halfkd) + (0.250 * quarterkd) + (0.100 * hundfils) +
                (0.050 * fiftyfils) + (0.020 * twentyfils) + (0.010 * tenfils) +
                    (0.005 * fivefils);

                var netBalance = total - @reserve;

                $.ajax({
                type: 'GET',
                    data: {
                        date: date,
                        salesman: +salesman,
                        period: period,
                        cheques: cheques,
                        talabat: talabat,
                        online: online,
                        knet: knet,
                        visa: visa,
                        expense: expense,
                        twentykd: twentykd,
                        tenkd: tenkd,
                        fivekd: fivekd,
                        onekd: onekd,
                        halfkd: halfkd,
                        quarterkd: quarterkd,
                        hundfils: hundfils,
                        fiftyfils: fiftyfils,
                        twentyfils: twentyfils,
                        tenfils: tenfils,
                        fivefils: fivefils,
                        netBalance: netBalance,
                    },
                url: '@Url.Action("SaveCashRegister", "CashRegister")',
                dataType: 'json',
                    success: function (response) {
                        if (+response === -1) {
                            alert('Something Went Wrong!');
                        } else if (+response === -30) {
                            alert('Session Expired. Please Re login!');
                            window.location.href = "@Url.Action("Index", "Home")"
                        }else {
                            alert('Your data has been saved!');
                            var link = "@Url.Action("Print", "CashRegister", new { oid = -1 })"
                            link = link.replace('-1', +response);
                            window.location.href = link;
                        }
                },
                error: function (ex) {
                    alert(ex);
                    $('.preloader').hide();
                }

            });

            }
        }

        function ChangeSelectValue(lang){
            if (lang === 'Ar') {
                var value = $("#ddlSalesmanEn").val();
                salesman = value;
                $("#ddlSalesmanAr").val(value);
            } else {
                var value = $("#ddlSalesmanAr").val();
                salesman = value;
                $("#ddlSalesmanEn").val(value);
            }
        }

        function ChangePeriod() {
            period = $("#ddlPeriod").val();
        }

        function GetRecords() {
            if (+salesman === -1) {
                alert('Please select salesman!');
                $("#ddlSalesmanAr").focus();
            } else {
                var link = "@Url.Action("CRRecords", "CashRegister", new { salesmanOid = -1 })"
                link = link.replace('-1', +salesman);
                window.location.href = link;
            }
        }




    </script>
}